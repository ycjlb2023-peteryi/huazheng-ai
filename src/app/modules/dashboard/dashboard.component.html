<div class="dashboard">
  <app-page-header [title]="'æ¬¢è¿å›æ¥ï¼Œ' + currentUser()?.username + 'ï¼'" subtitle="ä»Šå¤©ä¹Ÿè¦åŠ æ²¹å“¦ ğŸ‰" />
  
  <div class="dashboard-content">
    <!-- æ•°æ®ç»Ÿè®¡å¡ç‰‡ -->
    <div class="stats-grid">
      @for (stat of stats(); track stat.label) {
        <div class="stat-card fade-in" [style.animation-delay]="$index * 0.1 + 's'">
          <div class="stat-icon" [style.background]="stat.color + '20'" [style.color]="stat.color">
            {{ stat.icon }}
          </div>
          <div class="stat-content">
            <p class="stat-label">{{ stat.label }}</p>
            <h3 class="stat-value">{{ stat.value }}</h3>
          </div>
        </div>
      }
    </div>
    
    <!-- å¿«æ·æ“ä½œ -->
    <section class="quick-actions-section">
      <h2 class="section-title">å¿«é€Ÿå¼€å§‹</h2>
      <div class="quick-actions-grid">
        @for (action of quickActions; track action.title) {
          <button 
            class="action-card fade-in"
            [style.animation-delay]="$index * 0.1 + 's'"
            (click)="action.action()"
          >
            <div class="action-icon" [style.background]="action.color + '20'" [style.color]="action.color">
              {{ action.icon }}
            </div>
            <div class="action-content">
              <h3 class="action-title">{{ action.title }}</h3>
              <p class="action-description">{{ action.description }}</p>
            </div>
            <div class="action-arrow">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
              </svg>
            </div>
          </button>
        }
      </div>
    </section>
    
    <!-- æœ€è¿‘æ–¹æ¡ˆ -->
    <section class="recent-section">
      <div class="section-header">
        <h2 class="section-title">æœ€è¿‘æ–¹æ¡ˆ</h2>
        <a class="view-all-link" routerLink="/solution/history">
          æŸ¥çœ‹å…¨éƒ¨ â†’
        </a>
      </div>
      
      @if (recentSolutions().length > 0) {
        <div class="solutions-list">
          @for (solution of recentSolutions(); track solution.id) {
            <div class="solution-item fade-in" [style.animation-delay]="$index * 0.05 + 's'">
              <div class="solution-header">
                <div class="solution-icon">ğŸ“„</div>
                <div class="solution-meta">
                  <h4 class="solution-title text-ellipsis">{{ solution.productJudgment }}</h4>
                  <p class="solution-time">{{ formatDate(solution.createdAt) }}</p>
                </div>
                <span class="badge badge-success">å·²å®Œæˆ</span>
              </div>
              <div class="solution-preview">
                <div class="preview-item">
                  <span class="preview-label">æ ‡é…é¡¹ç›®ï¼š</span>
                  <span class="preview-value">{{ solution.recommendedConfig.standard.length }} é¡¹</span>
                </div>
                <div class="preview-item">
                  <span class="preview-label">é€‰é…é¡¹ç›®ï¼š</span>
                  <span class="preview-value">{{ solution.recommendedConfig.optional.length }} é¡¹</span>
                </div>
                <div class="preview-item">
                  <span class="preview-label">å¾…ç¡®è®¤é—®é¢˜ï¼š</span>
                  <span class="preview-value">{{ solution.questionsForCustomer.length }} ä¸ª</span>
                </div>
              </div>
              <div class="solution-actions">
                <button class="btn btn-sm btn-secondary" (click)="viewSolution(solution.id)">
                  æŸ¥çœ‹è¯¦æƒ…
                </button>
              </div>
            </div>
          }
        </div>
      } @else {
        <app-empty-state
          title="æš‚æ— æ–¹æ¡ˆè®°å½•"
          description="ç‚¹å‡»ä¸Šæ–¹ã€ç”Ÿæˆæ–°æ–¹æ¡ˆã€‘å¼€å§‹åˆ›å»ºæ‚¨çš„ç¬¬ä¸€ä¸ªæŠ€æœ¯æ–¹æ¡ˆ"
          actionText="ç”Ÿæˆæ–°æ–¹æ¡ˆ"
          (action)="quickActions[0].action()"
        />
      }
    </section>
    
    <!-- ä½¿ç”¨æç¤º -->
    <section class="tips-section">
      <div class="tips-card">
        <div class="tips-icon">ğŸ’¡</div>
        <div class="tips-content">
          <h3 class="tips-title">ä½¿ç”¨å°è´´å£«</h3>
          <p class="tips-text">{{ tips()[currentTipIndex()] }}</p>
        </div>
        <div class="tips-pagination">
          @for (tip of tips(); track $index) {
            <span 
              class="tip-dot" 
              [class.active]="$index === currentTipIndex()"
            ></span>
          }
        </div>
      </div>
    </section>
  </div>
</div>

